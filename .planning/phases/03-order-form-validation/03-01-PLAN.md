---
phase: 03-order-form-validation
plan: 01
type: execute
---

<objective>
Create order form with name, phone, email fields using react-hook-form + zod validation.

Purpose: Complete the order flow so customers can submit their contact details along with selected board size.
Output: Working order form that validates input and logs submission (WhatsApp integration in Phase 4).
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase summaries (dependency graph):
@.planning/phases/02-board-size-selection/02-01-SUMMARY.md

# Key files from frontmatter:
@src/components/order-form-section.tsx
@src/components/ui/form.tsx
@src/components/ui/input.tsx
@src/app/actions/sendInquiry.ts

**Tech stack available:** react-hook-form, zod, shadcn/ui form components
**Established patterns:**
- Zod schema validation (sendInquiry.ts pattern)
- shadcn/ui Form, FormField, FormItem, FormLabel, FormControl, FormMessage
- Client component with "use client" directive
- Selection state lifted to OrderFormSection

**Constraining decisions:**
- Phase 2: Selection state lifted to parent OrderFormSection for Phase 3 form access
- Phase 2: OrderFormSection wrapper keeps page as Server Component for SEO
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create OrderForm component with validation schema</name>
  <files>src/components/order-form.tsx</files>
  <action>
Create OrderForm client component with:

1. Zod schema for order form:
   - name: string, min 2 chars, required
   - phone: string, min 10 chars, required (note: phone is required here, unlike sendInquiry where it's optional)
   - email: string, valid email, required

2. Props interface:
   - selectedSize: string | null (from parent)
   - onSubmitSuccess: () => void (callback for parent to handle)

3. Form implementation using react-hook-form:
   - useForm with zodResolver
   - Form, FormField, FormItem, FormLabel, FormControl, FormMessage from @/components/ui/form
   - Input from @/components/ui/input
   - Button from @/components/ui/button

4. Submit handler:
   - Validate selectedSize is not null (show error if missing)
   - Log order data to console (console.log("Order submitted:", { ...formData, size: selectedSize }))
   - Call onSubmitSuccess callback
   - Show success state (disable form, show confirmation message)

5. Styling:
   - Match existing form patterns (grid layout, proper spacing)
   - Use theme colors (deep-berry for labels, candy-pink for button)

Do NOT create a server action yet - Phase 4 will add WhatsApp integration.
  </action>
  <verify>npm run lint passes, component imports resolve correctly</verify>
  <done>OrderForm component exists with 3 validated fields, submit logs to console with size</done>
</task>

<task type="auto">
  <name>Task 2: Integrate OrderForm into OrderFormSection</name>
  <files>src/components/order-form-section.tsx</files>
  <action>
Update OrderFormSection to use OrderForm:

1. Import OrderForm component

2. Add submission state:
   - const [isSubmitted, setIsSubmitted] = useState(false)

3. Replace placeholder div (lines 45-50) with:
   - Conditional render: if isSubmitted, show success message
   - Otherwise show OrderForm with selectedSize prop and onSubmitSuccess callback

4. Pass props to OrderForm:
   - selectedSize={selectedSize}
   - onSubmitSuccess={() => setIsSubmitted(true)}

5. Disable OrderForm when no size selected:
   - Form should be visually present but inputs disabled when selectedSize is null
   - The opacity-50 styling is already applied to the parent div
  </action>
  <verify>npm run build passes, visit localhost:3000/order and complete full flow</verify>
  <done>Form functional: select size → fill fields → submit → see success message, console shows order data</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run lint` passes
- [ ] Order form renders at /order with 3 fields
- [ ] Validation errors appear for invalid input (empty fields, short name, invalid email)
- [ ] Submit with valid data logs order to console including selected size
- [ ] Success message appears after submission
- [ ] Form disabled when no board size selected
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- Form validates name (min 2), phone (min 10), email (valid format)
- Order data logged with selectedSize included
- Ready for Phase 4: WhatsApp integration (form submission point identified)
</success_criteria>

<output>
After completion, create `.planning/phases/03-order-form-validation/03-01-SUMMARY.md`
</output>
